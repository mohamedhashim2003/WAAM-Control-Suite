# WAAM Control System & Digital Twin

## Overview
A custom, closed-loop software architecture designed for Wire Arc Additive Manufacturing (WAAM). This system acts as a specialized slicer, G-code generator, and real-time machine controller for GRBL-based robotic welding gantries. It features a live 3D digital twin and robust hardware-safety protocols.

This software was developed as the core control architecture for a Mechatronics Engineering WAAM graduation project (Class of 2026).
## ⚠️ DISCLAIMER: USE AT YOUR OWN RISK ⚠️
**This software is highly tailored to the specific mechanical, electrical, and kinematic specifications of our custom Wire Arc Additive Manufacturing (WAAM) prototype.** It is NOT a plug-and-play solution for other CNC machines or welders. You will need to significantly modify the hardcoded limits, physical offsets, and physics models to safely operate your own machine. 

By utilizing this code, you acknowledge that controlling high-voltage MIG welding equipment and heavy motorized gantries involves extreme inherent risks, including fire, electrocution, and physical crushing hazards. **I hold absolutely no accountability or liability for any injury, property damage, or financial loss that occurs.** Any damage or injury resulting from the deployment of this code is considered a direct result of operator negligence and misuse of this prototype software. 

**USE AT YOUR OWN EXTREME RISK.**
## Core Features
* **Integrated Slicer Engine:** Directly imports STL/OBJ CAD models and slices them using custom orthogonal rastering algorithms (alternating X/Y fills) to mitigate localized heat accumulation.
* **Physics-Aware Toolpaths:** Automatically calculates layer heights and deposition rates based on dynamic inputs (Wire Feed Speed, Travel Speed, Wire Diameter, and Bead Width) using a 90% volumetric efficiency model.
* **Live Digital Twin:** Utilizes `pyqtgraph` and OpenGL to render a real-time 3D simulation of the gantry and torch, tracking position and arc state via serial telemetry.
* **Robust Serial Streaming:** Implements a strict `RLock` threading architecture to safely stream G-code to GRBL while allowing asynchronous, real-time feed overrides without corrupting serial bytes.
* **Hardware Safety Protocols:** * Pre-flight G92 workspace validation.
    * Active Serial Watchdog to detect EMI-induced hardware freezing.
    * Hardcoded E-Stop routine that explicitly isolates and kills the high-voltage arc relay (`M5`) prior to soft-resetting the microcontroller.
* **State Recovery:** "Black Box" checkpointing system that saves print state every 10 lines, allowing for exact mid-layer job resumption in the event of a power failure.

## Tech Stack
* **Language:** Python 3
* **GUI:** PyQt5
* **3D Rendering & Geometry:** pyqtgraph, trimesh, shapely, numpy
* **Hardware Interface:** pyserial (Targeting Arduino/GRBL 1.1)

## Architecture Notes
The application is designed to be highly resilient to the extreme Electromagnetic Interference (EMI) generated by 100+ Amp MIG welding transformers. It relies on multi-threaded queuing and queued GUI signal slots to prevent segmentation faults during high-speed background I/O operations.

---
**Author:** Mohamed Hashim
**Role:** Lead Mechatronics and Software Engineer
**Status:** Proprietary Prototype
